目录

[TOC]

# 什么是脚手架

一个插件，基于它可以快速构建一套完整的自动化工程项目结构。
- Vue：vue-cli
- React：create-react-app（app：应用）

使用 `$ npm install create-react-app -g`安装

# 项目新建、启动、打包

- 新建一个项目：`$ create-react-app [项目名称]`

- 如果是克隆的别人的项目，直接安装依赖项：`$ npm install 或 yarn install`

- 启动一个项目: `$ npm run start 或 yarn start`

开发环境下，基于webpack编译处理，最后可以预览当前开发的项目成果（在webpack中安装了webpack-dev-server插件，基于这个插件会自动创建一个web服务[端口号是3000]），webpack会帮我们自动打开浏览器，展示页面并且监听页面，实现热更新。

- 打包: `$ npm run build 或 yarn build`

将项目整体编译打包的命令，（打包会生成build文件夹，包含所有编译后的内容，上传到服务器即可）


# 项目目录结构

1. 目录
- node_modules：当前项目安装的依赖包
	+ .bin：本地项目可执行命令，在package.json的scripts中配置对应的脚本即可

-  `public`：存放的是当前项目的`HTML页面`
  + index.html: `入口页`一般只有一个 root 标签（通过 document.getElementById("root") 获取）
	单页面放一个index.html，现在项目大多是单页面。
  

- src：存放的是所有的JS、路由、组件等（包括需要编写的css或图片等）
	+ `index.js`是当前项目的`主入口文件`
  一般会将 APP 挂载到一个ID为root的div中（根节点）

- .gitignore：git提交时的忽略文件目录

- packjson.json：当前项目的配置清单



# 修改默认配置项
在安装脚手架的基础上，需要额外安装一些模块，例如：react-router-dom / axios，再比如：less / less-loader...
情况一：安装其它的组件成功后，不需要修改webpack的配置项，此时我们直接安装，并且调取使用即可。
情况二：安装的插件是基于webpack处理的，也就是需要把安装的模块配置到webpack中。

1. 开启HTTPS协议模式（原理：设置环境变量HTTPS的值）
```javascript
set HTTPS=true&&yarn start
```
原理：在webpackDevServer.config.js中，修改环境变量HTTPS的值
```javascript
const protocol = process.env.HTTPS === 'true' ? 'https' : 'http';
```

2. 更改端口号
```javascript
set PORT=63344&&yarn start
```
原理：在scripts / start.js中，修改DEFAULT_PORT的值（可以直接修改环境变量PORT，也可以直接修改后边的3000）
```javascript
const DEFAULT_PORT = parseInt(process.env.PORT, 10) || 3000;
```

3. eject操作：`$ npm run eject`把node_modules中隐藏的配置项暴露到项目中（不可逆）

如果当前项目是基于git管理，在执行eject时，如果还有没有提交到历史区的内容，需要先提交到历史区，然后再eject，否则报错。
一旦暴露后，项目中多了两个文件夹config和scripts
- config：存放的是webpack的配置文件
	+ webpack.config.dev.js：开发环境下的配置项
	+ webpack.config.prod.js：生产环境下的配置项
	+ webpackDevServer.config.js：配置创建端口号为3000的服务，在浏览器预览
- scripts：存放的是可执行脚本的JS文件
	+ start.js：yarn start执行的JS文件
	+ build.js：yarn build执行的JS问价
package.json文件也被修改了。

开发环境和生产环境，如何在webpack中区分环境？
node中的process.env用于设置环境变量，通过不同的环境变量（development和production），规定哪个环境下执行的操作（不同的环境执行不同的配置文件）。

4. 支持less
预览项目，也是先基于webpack编译，把编译后的内容放到浏览器中运行。如果项目中使用了less，需要修改webpack配置项，在配置项中加入less的编译工作，这样后期预来项目，会首先基于webpack对less文件进行编译。
```
yarn add less less-loader
```
less是需要开发和生产环境都需要配置的，所以安装在全局。
开发环境下：在webpack.config.dev.js中
```javascript
	//=>[DEV:159~193行]
  {
    test: /\.(css|less)$/,//=>增加less
    use: [
      //...
      {
            loader: require.resolve('less-loader'),//=>增加less-loader
      },
    ],
  }
```
生产环境下：
```javascript
    {
        test: /\.(css|less)$/,
        loader: ExtractTextPlugin.extract(
            Object.assign(
                {
                    //...
                    use: [
                        //...
                        {
                            loader: require.resolve('less-loader'),
                        }
                    ],
                }
            )
        ),
    }
```


# 一些细节问题
一个/：根目录
在react中，所有的逻辑都是在JS中完成的（包括页面结构的创建），如果想给当前页面导入一些CSS样式或IMG图片等内容，有两种方式：
- 在JS中（JS导入的资源都会基于webpack编译）
基于·ES6 Module规范，import导入·（或者·CommonJS规范，require导入·）
=>这样webpack在编译合并JS时，会把导入的资源文件等插入到页面的结构中（`绝对不能`在JS管控的结构中通过`相对目录./或../导入资源`，因为在webpack编译时，地址就不再是之前的相对地址了）
例如，在目录src / index.js中：
```javascript
/*公共的样式在在index中导入*/
import './static/css/reset.min.css';
import './static/images/1.jpg';
```
- 在HTML中导入
HTML最后也要基于webpack编译，导入地址也`不建议`写相对地址，而是使用`%PUBLIC_URL%写成绝对地址`
例如，在目录public / index.html中：    
```vbscript-html
    <link rel="stylesheet" href="%PUBLIC_URL%/css/reset.min.css">
```

# 巩固提问

1. package.json 的 scripts 配置什么的？npm run start 是怎么开启一个服务打开页面的？
  
  scripts 配置了本地项目可执行命令对应的脚本
  
  - 执行 npm run start，首先运行 scripts 配置的脚本命令，
  - 然后基于 webpack-dev-server 打开一个服务


2. 入口页 index.html 是怎么挂载其它组件的？

  - 有一个 root 容器标签
  - 在 index.js 中通过 ReactDOM.render([JSX],[container],)方法，将 APP 根组件挂载到了 root

3. npm run eject 命令暴露的是哪两个文件夹？分别存放了什么内容


# 常见面试题（本节无）
