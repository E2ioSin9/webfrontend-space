目录

[TOC]


# 写在前面
日常开发中，我们经常会遇到判断数据类型的需求，简单的有判断数字还是字符串，进阶一点的有判断数组还是对象等等。

JS 用来检测数据类型的方式有：
- typeof
- instanceof
- constructor
- Object.prototype.toString.call()


# typeof
>- 语法：typeof [value] 
>- 返回值：使用 typeof 检测出来的结果是一个`字符串`，比如："number"/"string"/"boolean"/"undefined"/"object"/"function"，`小写`

typeof 的 BUG：
```js
let a; // typeof a //=>"undefined"
const s = Symbol('s'); // typeof a //=>"symbol"

typeof null //=>"object"

typeof console.log //=>'function'
```
typeof 可以**识别除了 null 所有的值类型**，也可以**识别函数**，但**无法识别 null 和引用类型，返回的都是 "object"**。

面试题：
```js
typeof typeof typeof [] 
//=>typeof "object"
//=>"string"
```


# instanceof
检测某一个`对象实例是否隶属于这个类`，这个类的原型对象只要出现在它的 __proto__ 线上就返回 true。
>语法：obj instanceof constructor

原理：基于原型链进行检测，只要在实例的原型链上有这个类，就返回 true。

```js
1 instanceof Number  //=>false
[] instanceof Array  //=>true
Array instanceof Function //=>true
[] instanceof Function //=>false，[]和Function属于两条不同的原型链上
```
局限性：
无法检测基本类型值
```js
let num1 = 12,
    num2 = new Number(12);
typeof num1; //=>'number'
typeof num2; //=>'object'
num1 instanceof Number; //=>false
num2 instanceof Number; //=>true
```

# constructor
所有对象都会从它的原型上继承一个 constructor 属性
```js
{}.constructor === Object  //=>true
[].constructor === Array  //=>true
```
局限性：原型对象必须是默认的，一旦被重写就没有 constructor 属性了


# Object.prototype.toString.call([value])
> Object.prototype 上的 toString 方法执行，会返回`当前值的内部类型`，格式：`"[object 所属的类型]"`。

我们要检测谁，就用 call 借用 Object.prototype.toString 方法，把 this 变为需要检测的值。返回一个由 "object " 和 class 组成的字符串，而 \[[class]] 是要判断的值的内部属性。


可以识别至少 12 种：
```js
// 以下是 11 种：基本数据类型和引用数据类型
Object.prototype.toString.call(undefined);// [object Undefined]
Object.prototype.toString.call(null);// [object Null]
var number = 1;          // [object Number]
var string = '123';      // [object String]
var boolean = true;      // [object Boolean]
var obj = {a: 1}         // [object Object]
var array = [1, 2, 3];   // [object Array]
var date = new Date();   // [object Date]
var error = new Error(); // [object Error]
var reg = /a/g;          // [object RegExp]
var func = function a(){}; // [object Function]

//内置的对象
Object.prototype.toString.call(Math); // [object Math]
Object.prototype.toString.call(JSON); // [object JSON]
Object.prototype.toString.call(arguments); // [object Arguments]
//DOM
Object.prototype.toString.call(document); // [object HTMLDocument]
```




# 常见面试题
1. typeof 判断哪些类型？
